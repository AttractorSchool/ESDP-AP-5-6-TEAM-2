{% extends 'base.html' %}
{% load static %}


{% block content %}

    <h2>Создание заказ-наряда</h2>
    <div class="w-50">
        <div class="progress" style="height: 20px; background-color: white;">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 33%;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100">1\3</div>
        </div>
        <br>
        <form method="POST" id="emp_reg" enctype="multipart/form-data">
            {% csrf_token %}
            <div>
                <label for="contractor" class="form-label">Контрагент <span style="color: red;">*</span></label>
                <select class="form-control selectpicker" id="contractor" name="contractor" data-live-search="true" required>
                    <option value="">-</option>
                    <optgroup label="Контрагенты">
                        {% for contractor in contractors %}
                            {% if contractor.id == session_contractor.id %}
                                <option value="{{ contractor.id }}" data-subtext="{{ contractor.IIN_or_BIN }}" selected>{{ contractor.name }}</option>
                            {% else %}
                                <option value="{{ contractor.id }}" data-subtext="{{ contractor.IIN_or_BIN }}">{{ contractor.name }}</option>
                            {% endif %}
                        {% endfor %}
                    </optgroup>
                </select>
                <div class="form-text" style="color: red;">
                    {% for err in form.errors.contractor %}{{ err }}{% endfor %}</div>
            </div>
            <br>
            <div class="col">
                <label for="own" class="form-label">Собственность <span style="color: red;">*</span></label>
                {% if session_own %}
                    <select name="own" class="form-select" id="own" required>
                        {% for own in owns %}
                            {% if own.id == session_own.id %}
                                <option value="{{ own.id }}" selected>{{ own.name }}</option>
                            {% else %}
                                <option value="{{ own.id }}">{{ own.name }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                {% else %}
                    <select name="own" class="form-select" disabled id="own" required>
                        <option value="">-</option>
                    </select>
                {% endif %}
                <div class="form-text" style="color: red;">
                    {% for err in register_form.errors.own %}{{ err }}{% endfor %}</div>
            </div>
            <br>
            <button disabled class="btn btn-secondary">Назад</button>
            <button type="submit" class="btn btn-primary">Далее</button>
        </form>
    </div>

{% endblock content %}

{% block js_block %}

    <script>var tpID = {{ tpID }}</script>
    <script src="{% static 'js/order/order_create_stage1.js' %}"></script>

{% endblock js_block %}
